{% extends 'base.html' %}

{% block content %}
<h1>Edit post</h1>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    Current image(s):
    <ul>
        {% for image in images %}
            <li>
                {{ image.image }}
                <a class="text-danger" href="{% url 'album:image_remove' operation='post_edit' pk=image.pk %}">Delete</a>
            </li>
        {% endfor %}
    </ul>
    <label>Pictures</label>
    <div class="custom-file">
        <input id="fileupload" type="file" name="image" multiple onchange="javascript:updateList()" class="custom-file-input" accept="image/*">
        <label class="custom-file-label" for="inputGroupFile02">Add more pictures</label>
    </div>
    <div id="fileList">

    </div>


    <label>{{ form.title.label }}</label>
        <input placeholder="{{ form.title.label }}" value="{{ form.title.value }}" name="title" class="form-control">
    <label>{{ form.description.label }}</label>
        <input placeholder="{{ form.description.label }}" value="{{ form.description.value }}" name="description" class="form-control">
    <label>{{ image_form.image.label }}</label
    <label>{{ form.date.label }}{{ form.date.errors }}</label>
        <input type="date" placeholder="{{ form.date.label }}" value="{{ form.date.value|date:"Y-m-d" }}" name="date" class="form-control">

    <!-- emoticons -->
    <label>{{ form.emoticon.label }}</label><br>
    <div class="form-group form-inline">
        <div class="custom-control custom-radio">
            <input type="radio" id="customRadio1" name="emoticon" class="custom-control-input" {% if form.emoticon.value == 'happy' %} checked {% endif %} value="happy">
            <label class="custom-control-label" for="customRadio1"><img src="/media/emoticons/happy.png" style="width:50;"> Happy</label>
        </div>
        <div class="custom-control custom-radio">
            <input type="radio" id="customRadio2" name="emoticon" class="custom-control-input" {% if form.emoticon.value == 'sleepy' %} checked {% endif %} value="sleepy">
            <label class="custom-control-label" for="customRadio2"><img src="/media/emoticons/sleepy.png" style="width:50;"> Sleepy</label>
        </div>
        <div class="custom-control custom-radio">
            <input type="radio" id="customRadio3" name="emoticon" class="custom-control-input" {% if form.emoticon.value == 'sick' %} checked {% endif %}  value="sick">
            <label class="custom-control-label" for="customRadio3"><img src="/media/emoticons/sick.png" style="width:50;"> Sick</label>
        </div>
    </div>

    <hr>
    <button type="submit" name="button" class="btn btn-primary">Submit</button>
</form>
{% endblock %}

{% block script %}
<!-- Displays selected files -->
<script type="text/javascript">
updateList = function() {
    var input = document.getElementById('fileupload');
    var output = document.getElementById('fileList');

    htmlStr = 'Selected files:<ul>';
    for (var i = 0; i < input.files.length; ++i) {
        htmlStr += '<li>' + input.files.item(i).name + '</li>';
    }
    htmlStr += '</ul>';
    output.innerHTML = htmlStr
}
</script>
{% endblock %}

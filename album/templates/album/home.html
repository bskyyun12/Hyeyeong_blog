{% extends 'base.html' %}

{% block content %}

<hr>
<button onclick="window.location='{% url 'album:post_new' %}'" type="button" class="btn btn-primary" >Add Post</button>
<hr>
<form class="my-2" action="" method="get">
    <div class="form-inline my-2">
        <input class="form-control mr-sm-2 my-2" placeholder="Title" type="text" name="title">
        <input class="form-control mr-sm-2 my-2" type="month" name="year_month" value="">
    </div>
  <button type="submit" class="btn btn-primary my-2">Search</button>
</form>

<hr>


<h1 class="my-4 text-center">
    <form class="my-2" action="" method="get">
        {% if title %}
            Searched by Title : {{title}}
        {% elif year_month %}
        <button type="submit" class="btn btn-primary mr-sm-5" name="year_month"  value="{{pre_year_month}}">Pre</button>
        {{ year_month|date:"Y. m" }}
        <button type="submit" class="btn btn-primary ml-sm-5" name="year_month"  value="{{next_year_month}}">Next</button>
        {% endif %}
    </form>
</h1>
<div class="row text-center">
    {% for post in posts %}
    <div class="col-md-6 col-6">
        <a href="{% url 'album:post_detail' pk=post.pk %}" class="d-block mb-2">
        <h2>{{ post.date|date:"Y.m.d" }}</h2>
        {% if post.image %}
            <img class="img-fluid img-thumbnail w3-round-xlarge" src="{{ post.image.url }}"/>
        {% endif %}
        </a>
        Posted by {{ post.author }}<br>
        title : {{ post.title }}<br>
    </div>
    {% endfor %}
</div>

{% endblock %}


{% block content_right %}
<h3>People</h3>
{% for user in users %}
    <a href="{% url 'accounts:view_profile_with_pk' pk=user.pk %}">
        <h5>{{ user }}</h5>
    </a>
    {% if not user in friends %}
    <a href="{% url 'album:change_friends' operation='add' pk=user.pk %}">
        <button type="button" class="btn btn-success">Add Friend</button>
    </a>
    {% endif %}
{% endfor %}
<h3>Friends</h3>
{% for friend in friends %}
    <a href="{% url 'accounts:view_profile_with_pk' pk=friend.pk %}">
        <h5>{{ friend }}</h5>
    </a>
    <a href="{% url 'album:change_friends' operation='remove' pk=friend.pk %}">
        <button type="button" class="btn btn-default">Remove Friend</button>
    </a>
{% endfor %}
{% endblock %}
